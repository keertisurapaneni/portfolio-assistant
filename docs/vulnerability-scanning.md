# Vulnerability Scanning & Automated Dependency Updates

This document describes the security tooling configured for the portfolio-assistant repository.

## Tools in Place

### 1. Renovate Bot (Dependency Updates)

**What it does:** Automatically monitors npm dependencies for new versions and known vulnerabilities. Opens PRs to update them.

**Auto-merge policy:**
- **Minor & patch updates** (e.g. 2.3.1 -> 2.3.2, or 2.3.x -> 2.4.0) are auto-merged — no action needed from you.
- **Major updates** (e.g. 2.x -> 3.0.0) open a PR with the `major` label for manual review, since these may contain breaking changes.

**Config file:** [`renovate.json`](../renovate.json) at repo root.

**Where to see results:** PRs labeled `dependencies` in the GitHub Pull Requests tab.

**One-time setup:** The [Renovate GitHub App](https://github.com/apps/renovate) must be installed and granted access to this repository. Once installed, Renovate reads the config file and operates automatically.

### 2. CodeQL (Code Scanning)

**What it does:** Static analysis that scans JavaScript and TypeScript code for security vulnerabilities — XSS, injection, unsafe redirects, prototype pollution, and more.

**When it runs:**
- On every push to `master`
- On every pull request targeting `master`
- Weekly scheduled scan (Mondays 6am UTC) to catch newly discovered vulnerability patterns

**Config file:** [`.github/workflows/codeql.yml`](../.github/workflows/codeql.yml)

**Where to see results:** GitHub repo > **Security** tab > **Code scanning alerts**

### 3. GitHub Secret Scanning (Built-in)

**What it does:** Automatically scans commits for leaked API keys, tokens, passwords, and other secrets. Alerts you if anything is found.

**Setup:** None required — this is enabled by default on all GitHub repositories.

**Where to see results:** GitHub repo > **Security** tab > **Secret scanning alerts**

## Summary Table

| Tool | Scans For | Runs | Auto-Fix? |
|------|-----------|------|-----------|
| Renovate Bot | Outdated/vulnerable npm packages | On schedule (configurable) | Yes — auto-merges minor/patch |
| CodeQL | Code-level security bugs (XSS, injection, etc.) | Push, PR, weekly | No — alerts only, manual fix |
| Secret Scanning | Leaked API keys and tokens in commits | Every push | No — alerts only |

## Frontend Security Notes

- **API keys are never exposed to the browser.** All third-party API calls (Finnhub, AI providers) are proxied through Supabase Edge Functions, which hold the secrets server-side.
- **Supabase Row Level Security (RLS)** is enabled on all database tables, ensuring users can only access their own data.
- **No `dangerouslySetInnerHTML`** is used in the React codebase — all user-facing content is rendered through React's default XSS-safe JSX.
- **Authentication** is handled by Supabase Auth, which manages tokens securely.
